<!DOCTYPE html>
<html>
<head>
<title>MapBBCode</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="lib/leaflet.css" />
<link rel="stylesheet" href="lib/leaflet.draw.css" />
<!--[if lte IE 8]>
    <link rel="stylesheet" href="lib/leaflet.ie.css" />
    <link rel="stylesheet" href="lib/leaflet.draw.ie.css" />
<![endif]-->
<script src="lib/leaflet.js"></script>
<script src="lib/leaflet.draw.js"></script>
<script src="lib/Bing.js"></script>
<script src="lib/mapbbcode.js"></script>
<script src="lib/mapbbcode-config.js"></script>
</head>
<body>
<script>
var mapBB = new MapBBCode({
    defaultPosition: [59.95, 30.3],
    defaultZoom: 13,
    viewWidth: '100%',
    windowWidth: 800,
    windowHeight: 500,
    layers: ['MapSurfer', 'OpenStreetMap', 'Bing Satellite:Arzdiw4nlOJzRwOz__qailc8NiR31Tt51dN2D7cm57NrnceZnCpgOkmJhNpGoppU']
});
</script>

<h1>[map] BBCode</h1>

<p>It is sad to see that while maps and geodata are trending, there is no reasonable solution to embed maps
in any of forum engines. Users of <a href="http://www.skyscrapercity.com/">SkyscraperCity</a>, the leading forum on
tall buildings, transport infrastructure and urban development, cannot use maps to show what they are discussing.
Cycling forums don't have route maps in their weekend journeys topics. Hikers cannot place photos taken in a recent
trip on a map. Offroad clubs still have to rely on arrays of GPS waypoints for their activities.</p>

<p>Meanwhile, recent technological advancements in web mapping, namely <a href="http://leafletjs.com">Leaflet</a>
library and its plugins, made it possible to create a simple solution for embedding maps in forums. It took a bit longer than
expected, but here is the library for parsing, displaying and editing [map] bbcode contents. With luck, this tag will
become as common on forums as [img] and [url].</p>

<div id="sample"></div>
<div style="float: right; width: 100px;">
<input type="button" value="Update" onclick="javascript:update();" style="width: 100%; height: 26px;"><br>
<input type="button" value="Edit" onclick="javascript:edit();" style="width: 100%; height: 26px;">
</div>
<textarea id="code" style="width: 490px; max-width: 490px; height: 48px;">[map]59.9342,30.3367(S); 59.4366,24.7529(F); 59.377,28.204(Border control); 59.934,30.337 59.718,30.037 59.39,28.532 59.372,27.444 59.428,26.807 59.367,26.433 59.469,26.016 59.437,24.753[/map]</textarea>
<script>
var code = document.getElementById('code');
function update() {
    mapBB.show('sample', code.value);
}
function edit() {
    mapBB.editorWindow(code.value, function(res) {
        if( res !== null ) {
            code.value = res;
            update();
        }
    });
}
update();
</script>

<p style="font-style: italic;">The rest of this page is coming soon.
See the <a href="https://github.com/MapBBCode/mapbbcode">library repository</a> for source code and examples.</p>

</body>
</html>